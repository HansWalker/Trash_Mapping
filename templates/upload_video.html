<!DOCTYPE html>
<html>
<head>
    <title>Uploaded Video</title>
</head>
<body>
    <h1>Uploaded Video Viewer</h1>

    <!-- Display the uploaded video -->
    <video controls>
        <source src="data:video/mp4;base64,{{ video_base64 }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <br>

    <!-- Search box for searching videos -->
    <form action="/search_video" method="POST" id="searchForm">
        <label for="search_box">Search Video:</label>
        <input type="text" name="search_box" id="search_box">
        <button type="submit" id="search_button">Search</button>
    </form>

    <!-- Display search results here -->
    <div id="search_results"></div>

    <script>
        // JavaScript code for handling the search functionality
        document.addEventListener("DOMContentLoaded", function () {
            const searchForm = document.getElementById("searchForm");
            const searchButton = document.getElementById("search_button");
            const searchResults = document.getElementById("search_results");

            searchForm.addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent the form from submitting normally

                const searchBox = document.getElementById("search_box");
                const searchQuery = searchBox.value;

                // Send an AJAX request to the server to call search_video_single function
                fetch(`/search_video_single/${searchQuery}`)
                    .then((response) => response.text())
                    .then((data) => {
                        // Display the search results in the search_results div
                        searchResults.innerHTML = data;
                    })
                    .catch((error) => {
                        console.error("Error:", error);
                    });
            });
        });
    </script>
</body>
</html>